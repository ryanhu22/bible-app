(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{7223:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[query]",function(){return t(4721)}])},4721:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return SearchPage}});var s=t(1010),a=t(1309),o=t(7582),i=t(5893),r=t(9008),l=t.n(r),c=t(1163),u=t(7294),h=t(5362),d=t(9267),m=t(4586),components_ChatOther=function(e){var n=e.message;return(0,i.jsxs)("div",{className:"flex w-full mt-2 space-x-3 max-w-xs",children:[(0,i.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-300"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"bg-gray-300 p-2 rounded-r-lg rounded-bl-lg",children:(0,i.jsx)("p",{className:"text-sm",children:n})})})]})},g=t(3299),components_ChatMe=function(e){var n,t=e.message,s=(0,g.useSession)().data;return(0,i.jsxs)("div",{className:"flex w-full mt-2 space-x-3 max-w-xs ml-auto justify-end",children:[(0,i.jsx)("div",{className:"flex flex-col items-end",children:(0,i.jsx)("div",{className:"bg-blue-600 text-white p-2 rounded-l-lg rounded-br-lg",children:(0,i.jsx)("p",{className:"text-sm",children:t})})}),s?(0,i.jsx)("img",{src:null==s?void 0:null===(n=s.user)||void 0===n?void 0:n.image,alt:"profile picture",className:"h-10 w-10 rounded-full"}):(0,i.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-300"})]})},p=t(9844),components_ChatWaiting=function(){return(0,i.jsxs)("div",{className:"flex w-full mt-2 space-x-3 max-w-xs",children:[(0,i.jsx)("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-300"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"bg-gray-300 p-2 rounded-r-lg rounded-bl-lg",children:(0,i.jsx)("p",{className:"text-sm",children:(0,i.jsx)(p.e,{sequence:["please wait...",3e3],wrapper:"span",cursor:!0,repeat:1/0,style:{fontSize:"1em",display:"inline-block"}})})})})]})},f=t(882),components_ChatWindow=function(){(0,g.useSession)().data;var e,n=(0,a._)((0,u.useState)([{from:"me",text:"Hello, it's me"},{from:"them",text:"Hello, it's a computer"}]),2),t=n[0],r=n[1],l=(0,a._)((0,u.useState)(""),2),c=l[0],h=l[1],d=(0,u.useRef)(),p=(0,u.useRef)(null),x=(0,a._)((0,u.useState)(!1),2),b=x[0],v=x[1],handleUserInputChange=function(e){h(e.target.value)};function _gpt_api(){return(_gpt_api=(0,s._)(function(e,n){var t,s,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e.preventDefault(),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({request:n})})];case 2:return[4,(t=o.sent()).json()];case 3:if(s=o.sent(),200!==t.status)throw s.error||Error("Request failed with status ".concat(t.status));return[2,s.result];case 4:return console.error(a=o.sent()),alert(a.message),[3,5];case 5:return[2]}})})).apply(this,arguments)}var addMessage=function(e){r(function(n){return(0,m._)(n).concat([e])})},j=(e=(0,s._)(function(e){var n,t;return(0,o.Jh)(this,function(s){switch(s.label){case 0:return e.preventDefault(),n=c,t={from:"me",text:c},h(""),d.current.value="",addMessage(t),v(!0),[4,function(e,n){return _gpt_api.apply(this,arguments)}(e,n)];case 1:return addMessage({from:"other",text:s.sent()}),v(!1),[2]}})}),function(n){return e.apply(this,arguments)}),scrollToBottom=function(){var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,u.useEffect)(function(){scrollToBottom()},[t]),(0,i.jsxs)("div",{className:"flex flex-col flex-grow w-full bg-white shadow-xl rounded-lg overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex flex-col flex-grow h-0 p-4 overflow-auto bg-gray-50 scrollbar scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-300",children:[t.map(function(e){return"me"===e.from?(0,i.jsx)(components_ChatMe,{message:e.text},e.id):(0,i.jsx)(components_ChatOther,{message:e.text},e.id)}),b?(0,i.jsx)(components_ChatWaiting,{}):null,(0,i.jsx)("div",{ref:p})]}),(0,i.jsx)("div",{className:"p-4 border-t-2",children:(0,i.jsxs)("form",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"text",placeholder:"Example: Who is Jesus?",className:"border-none flex-1 focus:ring-0 outline-none text-s",onChange:function(e){return handleUserInputChange(e)},ref:d}),(0,i.jsx)("button",{type:"submit",className:"font-semibold text-blue-400",onClick:function(e){return j(e)},children:(0,i.jsx)(f.Z,{className:"h-8 text-gray-700 -rotate-45 hover:text-gray-400"})})]})})]})},components_ChatButton=function(){var e=(0,a._)((0,u.useState)(!1),2),n=e[0],t=e[1],s=(0,u.useRef)(null);return(0,i.jsxs)("div",{className:"fixed bottom-4 right-4",children:[(0,i.jsx)("button",{className:"",onClick:function(){console.log("CLICKED"),t(!n),console.log(n)},children:n?(0,i.jsx)(h.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"}):(0,i.jsx)(d.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})}),n&&(0,i.jsx)("div",{ref:s,className:"h-1/2 w-3/4 md:w-1/2 xl:w-1/3 fixed bottom-16 xl:bottom-20 right-4 xl:right-6 bg-white rounded-lg shadow-lg",children:(0,i.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-black",children:(0,i.jsx)(components_ChatWindow,{})})})]})},x=t(7611),b=t.n(x),v=t(8125),j=t(8974),y=t(6055),w=t(405),k=t(9828),S=t(3977),C=t(6650);t(8887),(0,S.C6)().length?(0,S.Mq)():(0,S.ZF)({apiKey:"AIzaSyAq06g5VP2nlfnLEFp9oIAcSdVwzo6ccw4",authDomain:"bible-assi.firebaseapp.com",projectId:"bible-assi",storageBucket:"bible-assi.appspot.com",messagingSenderId:"924013625104",appId:"1:924013625104:web:776e3c2a1a28feffe1af95",measurementId:"G-E2RJDYCPC2"});var N=(0,k.ad)();(0,C.cF)();var components_PassageMobile=function(e){var n,t,r,l=e.passageHTML,c=e.searchFunc,h=e.book,d=e.chapter,p=(0,g.useSession)().data,x=(0,u.useRef)(),S=(0,a._)((0,u.useState)([]),2),C=(S[0],S[1]),_=(0,a._)((0,u.useState)(!1),2),z=_[0],E=_[1],L=(0,a._)((0,u.useState)(0),2),M=(L[0],L[1]),R=(0,a._)((0,u.useState)(0),2),D=(R[0],R[1]),H=(0,a._)((0,u.useState)(0),2),T=(H[0],H[1]),I=(0,a._)((0,u.useState)(!1),2),J=I[0],A=I[1],B=(0,a._)((0,u.useState)(""),2),O=B[0],F=B[1],P=(0,a._)((0,u.useState)(),2),q=P[0],Z=P[1],U=(0,a._)((0,u.useState)(0),2),W=U[0],Y=U[1],G=(0,a._)((0,u.useState)(0),2),K=G[0],V=G[1];console.log(q);var Q=(0,u.useRef)(null),X={genesis:50,exodus:40,leviticus:27,numbers:36,deuteronomy:34,joshua:24,judges:21,ruth:4,"1samuel":31,"2samuel":24,"1kings":22,"2kings":25,"1chronicles":29,"2chronicles":36,ezra:10,nehemiah:13,esther:10,job:42,psalms:150,proverbs:31,ecclesiastes:12,songofsolomon:8,isaiah:66,jeremiah:52,lamentations:5,ezekiel:48,daniel:12,hosea:14,joel:3,amos:9,obadiah:1,jonah:4,micah:7,nahum:3,habakkuk:3,zephaniah:3,haggai:2,zechariah:14,malachi:4,matthew:28,mark:16,luke:24,john:21,acts:28,romans:16,"1corinthians":16,"2corinthians":13,galatians:6,ephesians:6,philippians:4,colossians:4,"1thessalonians":5,"2thessalonians":3,"1timothy":6,"2timothy":4,titus:3,philemon:1,hebrews:13,james:5,"1peter":5,"2peter":3,"1john":5,"2john":1,"3john":1,jude:1,revelation:22},$={genesis:["revelation","exodus"],exodus:["genesis","leviticus"],leviticus:["exodus","numbers"],numbers:["leviticus","deuteronomy"],deuteronomy:["numbers","joshua"],joshua:["deuteronomy","judges"],judges:["joshua","ruth"],ruth:["judges","1samuel"],"1samuel":["ruth","2samuel"],"2samuel":["1samuel","1kings"],"1kings":["2samuel","2kings"],"2kings":["1kings","1chronicles"],"1chronicles":["2kings","2chronicles"],"2chronicles":["1chronicles","ezra"],ezra:["2chronicles","nehemiah"],nehemiah:["ezra","esther"],esther:["nehemiah","job"],job:["esther","psalms"],psalms:["job","proverbs"],proverbs:["psalms","ecclesiastes"],ecclesiastes:["proverbs","songofsolomon"],songofsolomon:["ecclesiastes","isaiah"],isaiah:["songofsolomon","jeremiah"],jeremiah:["isaiah","lamentations"],lamentations:["jeremiah","ezekiel"],ezekiel:["lamentations","daniel"],daniel:["ezekiel","hosea"],hosea:["daniel","joel"],joel:["hosea","amos"],amos:["joel","obadiah"],obadiah:["amos","jonah"],jonah:["obadiah","micah"],micah:["jonah","nahum"],nahum:["micah","habakkuk"],habakkuk:["nahum","zephaniah"],zephaniah:["habakkuk","haggai"],haggai:["zephaniah","zechariah"],zechariah:["haggai","malachi"],malachi:["zechariah","matthew"],matthew:["malachi","mark"],mark:["matthew","luke"],luke:["mark","john"],john:["luke","acts"],acts:["john","romans"],romans:["acts","1corinthians"],"1corinthians":["romans","2corinthians"],"2corinthians":["1corinthians","galatians"],galatians:["2corinthians","ephesians"],ephesians:["galatians","philippians"],philippians:["ephesians","colossians"],colossians:["philippians","1thessalonians"],"1thessalonians":["colossians","2thessalonians"],"2thessalonians":["1thessalonians","1timothy"],"1timothy":["2thessalonians","2timothy"],"2timothy":["1timothy","titus"],titus:["2timothy","philemon"],philemon:["titus","hebrews"],hebrews:["philemon","james"],james:["hebrews","1peter"],"1peter":["james","2peter"],"2peter":["1peter","1john"],"1john":["2peter","2john"],"2john":["1john","3john"],"3john":["2john","jude"],jude:["3john","revelation"],revelation:["jude","genesis"]};function handleClickOutside(e){x.current&&!x.current.contains(e.target)&&A(!1)}(0,u.useEffect)(function(){return window.addEventListener("click",handleClickOutside),function(){window.removeEventListener("click",handleClickOutside)}},[]),(0,u.useEffect)(function(){M(window.innerWidth);var handleResize=function(){return M(window.innerWidth)};return window.addEventListener("resize",handleResize),function(){return window.removeEventListener("resize",handleResize)}},[]),(0,u.useEffect)(function(){function handleSelection(){var e=window.getSelection();if(!e.isCollapsed){var n=e.getRangeAt(0),t=n.getBoundingClientRect(),s=t.x+t.width/2,a=t.y+window.scrollY-50;Z(n),Y(s),V(a)}}return document.addEventListener("mouseup",handleSelection),document.addEventListener("touchend",handleSelection),function(){document.removeEventListener("mouseup",handleSelection),document.removeEventListener("touchend",handleSelection)}},[]);var ee=(n=(0,s._)(function(e,n,t,s){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return a=(0,k.hJ)(N,"Users",e,n),[4,(0,k.pl)((0,k.JU)(a,t),{chapter:t,html:s})];case 1:return o.sent(),[2]}})}),function(e,t,s,a){return n.apply(this,arguments)}),en=(t=(0,s._)(function(e){var n,t;return(0,o.Jh)(this,function(s){return E(!0),clearAllHighlights(),(n=parseInt(d))-1<1?c(e,t=$[h][0],X[t].toString()):c(e,h,(n-1).toString()),E(!1),[2]})}),function(e){return t.apply(this,arguments)}),et=(r=(0,s._)(function(e){var n;return(0,o.Jh)(this,function(t){return E(!0),clearAllHighlights(),(n=parseInt(d))+1>X[h]?c(e,$[h][1],"1"):c(e,h,(n+1).toString()),E(!1),[2]})}),function(e){return r.apply(this,arguments)}),handleSelection=function(){var e=null;if(window.getSelection?e=window.getSelection():void 0!==document.selection&&(e=document.selection),"Range"===e.type){var n=e.getRangeAt(0).getBoundingClientRect();D(n.x+n.width/2),T(n.y+window.scrollY)}},submitComment=function(e,n){e.preventDefault(),n=n.trim();var t=Date.now().toString(36)+Math.random().toString(36).substring(2,5),s=b()(q,"span",{id:t,class:"bg-yellow-400 hover:bg-yellow-300 cursor-pointer",onClick:'commentClick("'.concat(t,'", "').concat(n,'", ').concat(W,", ").concat(K,", false, 0)"),onMouseEnter:'showCommentScriptFunc("'.concat(n,'", ').concat(W,", ").concat(K,")"),onMouseLeave:"hideCommentScriptFunc(".concat(W,", ").concat(K,")")});addHighlight(t,s);var a=Q.current.outerHTML;(null==p?void 0:p.user)&&ee(p.user.email,h,d,a),F(""),A(!1)},addHighlight=function(e,n){C(function(t){return(0,m._)(t).concat([[e,n]])})},clearAllHighlights=function(){C([])};return(0,i.jsx)(w.B6,{children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex",onMouseUp:handleSelection,onTouchEnd:handleSelection,children:[(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 top-1/2 transform -translate-y-1/2",children:(0,i.jsx)("button",{onClick:function(e){return en(e)},disabled:z,children:(0,i.jsx)(v.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})}),(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 bottom-48 transform -translate-y-1/2",children:(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-yellow-200 border border-black",onClick:function(){console.log("Selection Yellow");var e=b()(q,"span",{class:"bg-yellow-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),e);var n=Q.current.outerHTML;(null==p?void 0:p.user)&&ee(p.user.email,h,d,n)}})}),(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 bottom-40 transform -translate-y-1/2",children:(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-blue-200 border border-black",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){e.getRangeAt(0);var n=b()(q,"span",{class:"bg-blue-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),n)}e.empty&&e.empty();var t=Q.current.outerHTML;(null==p?void 0:p.user)&&ee(p.user.email,h,d,t)}})}),(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 bottom-32 transform -translate-y-1/2",children:(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-red-200 border border-black",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){e.getRangeAt(0);var n=b()(q,"span",{class:"bg-red-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),n)}e.empty&&e.empty();var t=Q.current.outerHTML;(null==p?void 0:p.user)&&ee(p.user.email,h,d,t)}})}),(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 bottom-24 transform -translate-y-1/2",children:(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-purple-200 border border-black",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){e.getRangeAt(0);var n=b()(q,"span",{class:"bg-white"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),n)}e.empty&&e.empty();var t=Q.current.outerHTML;(null==p?void 0:p.user)&&ee(p.user.email,h,d,t)}})}),(0,i.jsxs)("div",{ref:x,children:[(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 bottom-16 transform -translate-y-1/2",children:(0,i.jsx)(j.Z,{className:"w-6 h-6 border border-black",onClick:function(){A(!J)}})}),J?(0,i.jsx)("div",{className:"fixed bottom-16",children:(0,i.jsxs)("form",{className:"flex bg-gray-50 items-center border border-gray-400 rounded-md mt-4 py-4 px-2",onSubmit:function(e){return submitComment(e,O)},children:[(0,i.jsx)("input",{className:"w-full bg-transparent focus:outline-none",id:"message",placeholder:"Add a comment...",value:O,onChange:function(e){F(e.target.value)}}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("button",{type:"submit",children:(0,i.jsx)(f.Z,{className:"h-6 -rotate-45 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})})]})}):null]}),(0,i.jsx)("div",{className:"px-3",children:(0,i.jsx)("div",{className:"",ref:Q,id:"passagediv",children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:l}})})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function commentClick(commentID, commentText, x_coord, y_coord, isDelete, clickCounter) {\n                      if (!isDelete) {\n                        const comment = document.createElement('div');\n                        comment.style.position = \"absolute\";\n                        comment.style.left = x_coord + \"px\";\n                        comment.style.top = y_coord + \"px\";\n                        comment.textContent = commentText;\n                        comment.style.border = '1px solid black';\n                        comment.style.borderRadius = '5px';\n                        comment.style.backgroundColor = 'white';\n                        comment.style.padding = '5px';\n                        comment.style.textAlign = 'center';\n                        comment.style.margin = '10px';\n                        const passageDiv = document.getElementById('passagediv');\n                        passageDiv.appendChild(comment);\n                      }\n                  }"})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function showCommentScriptFunc(commentText, x_coord, y_coord) {\n                    const comment = document.createElement('div');\n                    comment.style.position = \"absolute\";\n                    comment.style.left = x_coord + \"px\";\n                    comment.style.top = y_coord + \"px\";\n                    comment.textContent = commentText;\n                    comment.style.border = '1px solid black';\n                    comment.style.borderRadius = '5px';\n                    comment.style.backgroundColor = 'white';\n                    comment.style.padding = '5px';\n                    comment.style.textAlign = 'center';\n                    comment.style.margin = '10px';\n                    const passageDiv = document.getElementById('passagediv');\n                    passageDiv.appendChild(comment);\n                  }"})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function hideCommentScriptFunc(x_coord, y_coord) {\n                    const passageDiv = document.getElementById('passagediv');\n                    const lastDiv = passageDiv.lastChild;\n                    passageDiv.removeChild(lastDiv);\n                  }"})}),(0,i.jsx)("div",{className:"fixed right-3 xl:right-10 top-1/2 transform -translate-y-1/2",children:(0,i.jsx)("button",{onClick:function(e){return et(e)},disabled:z,children:(0,i.jsx)(y.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})})]})})})})})},components_PassageDesktop=function(e){var n,t,r,l=e.passageHTML,c=e.searchFunc,h=e.book,d=e.chapter,p=(0,g.useSession)().data,x=(0,a._)((0,u.useState)([]),2),j=(x[0],x[1]),S=(0,a._)((0,u.useState)(!1),2),C=S[0],_=S[1],z=(0,a._)((0,u.useState)(!1),2),E=z[0],L=z[1],M=(0,a._)((0,u.useState)(0),2),R=M[0],D=M[1],H=(0,a._)((0,u.useState)(0),2),T=H[0],I=H[1],J=(0,a._)((0,u.useState)(0),2),A=J[0],B=J[1],O=(0,a._)((0,u.useState)(""),2),F=O[0],P=O[1],q=(0,a._)((0,u.useState)(),2),Z=q[0],U=q[1],W=(0,a._)((0,u.useState)(0),2),Y=W[0],G=W[1],K=(0,a._)((0,u.useState)(0),2),V=K[0],Q=K[1],X=(0,u.useRef)(null),$={genesis:50,exodus:40,leviticus:27,numbers:36,deuteronomy:34,joshua:24,judges:21,ruth:4,"1samuel":31,"2samuel":24,"1kings":22,"2kings":25,"1chronicles":29,"2chronicles":36,ezra:10,nehemiah:13,esther:10,job:42,psalms:150,proverbs:31,ecclesiastes:12,songofsolomon:8,isaiah:66,jeremiah:52,lamentations:5,ezekiel:48,daniel:12,hosea:14,joel:3,amos:9,obadiah:1,jonah:4,micah:7,nahum:3,habakkuk:3,zephaniah:3,haggai:2,zechariah:14,malachi:4,matthew:28,mark:16,luke:24,john:21,acts:28,romans:16,"1corinthians":16,"2corinthians":13,galatians:6,ephesians:6,philippians:4,colossians:4,"1thessalonians":5,"2thessalonians":3,"1timothy":6,"2timothy":4,titus:3,philemon:1,hebrews:13,james:5,"1peter":5,"2peter":3,"1john":5,"2john":1,"3john":1,jude:1,revelation:22},ee={genesis:["revelation","exodus"],exodus:["genesis","leviticus"],leviticus:["exodus","numbers"],numbers:["leviticus","deuteronomy"],deuteronomy:["numbers","joshua"],joshua:["deuteronomy","judges"],judges:["joshua","ruth"],ruth:["judges","1samuel"],"1samuel":["ruth","2samuel"],"2samuel":["1samuel","1kings"],"1kings":["2samuel","2kings"],"2kings":["1kings","1chronicles"],"1chronicles":["2kings","2chronicles"],"2chronicles":["1chronicles","ezra"],ezra:["2chronicles","nehemiah"],nehemiah:["ezra","esther"],esther:["nehemiah","job"],job:["esther","psalms"],psalms:["job","proverbs"],proverbs:["psalms","ecclesiastes"],ecclesiastes:["proverbs","songofsolomon"],songofsolomon:["ecclesiastes","isaiah"],isaiah:["songofsolomon","jeremiah"],jeremiah:["isaiah","lamentations"],lamentations:["jeremiah","ezekiel"],ezekiel:["lamentations","daniel"],daniel:["ezekiel","hosea"],hosea:["daniel","joel"],joel:["hosea","amos"],amos:["joel","obadiah"],obadiah:["amos","jonah"],jonah:["obadiah","micah"],micah:["jonah","nahum"],nahum:["micah","habakkuk"],habakkuk:["nahum","zephaniah"],zephaniah:["habakkuk","haggai"],haggai:["zephaniah","zechariah"],zechariah:["haggai","malachi"],malachi:["zechariah","matthew"],matthew:["malachi","mark"],mark:["matthew","luke"],luke:["mark","john"],john:["luke","acts"],acts:["john","romans"],romans:["acts","1corinthians"],"1corinthians":["romans","2corinthians"],"2corinthians":["1corinthians","galatians"],galatians:["2corinthians","ephesians"],ephesians:["galatians","philippians"],philippians:["ephesians","colossians"],colossians:["philippians","1thessalonians"],"1thessalonians":["colossians","2thessalonians"],"2thessalonians":["1thessalonians","1timothy"],"1timothy":["2thessalonians","2timothy"],"2timothy":["1timothy","titus"],titus:["2timothy","philemon"],philemon:["titus","hebrews"],hebrews:["philemon","james"],james:["hebrews","1peter"],"1peter":["james","2peter"],"2peter":["1peter","1john"],"1john":["2peter","2john"],"2john":["1john","3john"],"3john":["2john","jude"],jude:["3john","revelation"],revelation:["jude","genesis"]};(0,u.useEffect)(function(){D(window.innerWidth);var handleResize=function(){return D(window.innerWidth)};return window.addEventListener("resize",handleResize),function(){return window.removeEventListener("resize",handleResize)}},[]),(0,u.useEffect)(function(){function handleSelection(){var e=window.getSelection();if(!e.isCollapsed){var n=e.getRangeAt(0),t=n.getBoundingClientRect(),s=t.x+t.width/2,a=t.y+window.scrollY-50;U(n),G(s),Q(a)}}return document.addEventListener("mouseup",handleSelection),function(){document.removeEventListener("mouseup",handleSelection)}},[]);var en=(n=(0,s._)(function(e,n,t,s){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return a=(0,k.hJ)(N,"Users",e,n),[4,(0,k.pl)((0,k.JU)(a,t),{chapter:t,html:s})];case 1:return o.sent(),[2]}})}),function(e,t,s,a){return n.apply(this,arguments)}),et=(t=(0,s._)(function(e){var n,t;return(0,o.Jh)(this,function(s){return _(!0),clearAllHighlights(),(n=parseInt(d))-1<1?c(e,t=ee[h][0],$[t].toString()):c(e,h,(n-1).toString()),_(!1),[2]})}),function(e){return t.apply(this,arguments)}),es=(r=(0,s._)(function(e){var n;return(0,o.Jh)(this,function(t){return _(!0),clearAllHighlights(),(n=parseInt(d))+1>$[h]?c(e,ee[h][1],"1"):c(e,h,(n+1).toString()),_(!1),[2]})}),function(e){return r.apply(this,arguments)}),handleSelection=function(){var e=null;if(window.getSelection?e=window.getSelection():void 0!==document.selection&&(e=document.selection),"Range"===e.type){var n=e.getRangeAt(0).getBoundingClientRect();I(n.x+n.width/2),B(n.y+window.scrollY),L(!0)}else L(!1)},submitComment=function(e,n){e.preventDefault(),n=n.trim();var t=Date.now().toString(36)+Math.random().toString(36).substring(2,5),s=b()(Z,"span",{id:t,class:"bg-yellow-400 hover:bg-yellow-300 cursor-pointer",onClick:'commentClick("'.concat(t,'")'),onMouseEnter:'showCommentScriptFunc("'.concat(n,'", ').concat(Y,", ").concat(V,")"),onMouseLeave:"hideCommentScriptFunc(".concat(Y,", ").concat(V,")")});addHighlight(t,s);var a=X.current.outerHTML;(null==p?void 0:p.user)&&en(p.user.email,h,d,a),P(""),L(!1)},addHighlight=function(e,n){j(function(t){return(0,m._)(t).concat([[e,n]])})},clearAllHighlights=function(){j([])};return(0,i.jsx)(w.B6,{children:(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[E&&(0,i.jsxs)("div",{className:"absolute rounded-md mx-auto bg-white border border-black z-50",style:{top:A-150,left:T+300<=R-100?T+100:R-300},children:[(0,i.jsxs)("div",{className:"px-6 py-2 rounded-b-md",children:[(0,i.jsx)("h2",{className:"text-sm font-bold text-gray-900 text-center",children:"Choose a highlight color"}),(0,i.jsxs)("div",{className:"flex mt-4 justify-center items-center gap-4",children:[(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-yellow-300 hover:border hover:border-black hover:scale-125 transition-all duration-150 ease-out",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){console.log("Selection Yellow");var n=e.getRangeAt(0),t=b()(n,"span",{class:"bg-yellow-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),t)}e.empty&&e.empty();var s=X.current.outerHTML;(null==p?void 0:p.user)&&en(p.user.email,h,d,s),L(!1)}}),(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-blue-300 hover:border hover:border-black hover:scale-125 transition-all duration-150 ease-out",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){var n=e.getRangeAt(0),t=b()(n,"span",{class:"bg-blue-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),t)}e.empty&&e.empty();var s=X.current.outerHTML;(null==p?void 0:p.user)&&en(p.user.email,h,d,s),L(!1)}}),(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-red-300 hover:border hover:border-black hover:scale-125 transition-all duration-150 ease-out",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){var n=e.getRangeAt(0),t=b()(n,"span",{class:"bg-red-100"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),t)}e.empty&&e.empty();var s=X.current.outerHTML;(null==p?void 0:p.user)&&en(p.user.email,h,d,s),L(!1)}}),(0,i.jsx)("button",{className:"w-6 h-6 rounded-full bg-purple-300 hover:border hover:border-black hover:scale-125 transition-all duration-150 ease-out",onClick:function(){var e=window.getSelection();if(!e)return null;if(!e.isCollapsed){var n=e.getRangeAt(0),t=b()(n,"span",{class:"bg-white"});addHighlight(Date.now().toString(36)+Math.random().toString(36).substring(2,5),t)}e.empty&&e.empty();var s=X.current.outerHTML;(null==p?void 0:p.user)&&en(p.user.email,h,d,s),L(!1)}})]})]}),(0,i.jsxs)("div",{className:"py-4 px-6 rounded-t-md",children:[(0,i.jsx)("h2",{className:"text-sm font-bold text-gray-900 text-center",children:"Or type a comment..."}),(0,i.jsxs)("form",{className:"flex bg-gray-50 items-center border border-gray-400 rounded-md mt-4 py-4 px-2",onSubmit:function(e){return submitComment(e,F)},children:[(0,i.jsx)("input",{className:"w-full bg-transparent focus:outline-none",id:"message",placeholder:"Add a comment...",value:F,onChange:function(e){P(e.target.value)}}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("button",{type:"submit",children:(0,i.jsx)(f.Z,{className:"h-6 -rotate-45 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})})]})]})]}),(0,i.jsxs)("div",{className:"flex",onMouseUp:handleSelection,onTouchEnd:handleSelection,children:[(0,i.jsx)("div",{className:"fixed left-3 xl:left-10 top-1/2 transform -translate-y-1/2",children:(0,i.jsx)("button",{onClick:function(e){return et(e)},disabled:C,children:(0,i.jsx)(v.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})}),(0,i.jsx)("div",{className:"px-3",children:(0,i.jsx)("div",{className:"",ref:X,id:"passagediv",children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:l}})})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function commentClick(commentID) {\n                      const spans = document.querySelectorAll('span');\n                      // Loop through the spans and delete the one with id=\"abc\"\n                      spans.forEach((span) => {\n                        if (span.id === commentID) {\n                          while (span.firstChild) {\n                            span.parentNode.insertBefore(span.firstChild, span);\n                          }\n                        }\n                      });\n                  }"})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function showCommentScriptFunc(commentText, x_coord, y_coord) {\n                    const comment = document.createElement('div');\n                    comment.style.position = \"absolute\";\n                    comment.style.left = x_coord + \"px\";\n                    comment.style.top = y_coord + \"px\";\n                    comment.textContent = commentText;\n                    comment.style.border = '1px solid black';\n                    comment.style.borderRadius = '5px';\n                    comment.style.backgroundColor = 'white';\n                    comment.style.padding = '5px';\n                    comment.style.textAlign = 'center';\n                    comment.style.margin = '10px';\n                    const passageDiv = document.getElementById('passagediv');\n                    passageDiv.appendChild(comment);\n                  }"})}),(0,i.jsx)(w.ql,{children:(0,i.jsx)("script",{children:"function hideCommentScriptFunc(x_coord, y_coord) {\n                    const passageDiv = document.getElementById('passagediv');\n                    const lastDiv = passageDiv.lastChild;\n                    passageDiv.removeChild(lastDiv);\n                  }"})}),(0,i.jsx)("div",{className:"fixed right-3 xl:right-10 top-1/2 transform -translate-y-1/2",children:(0,i.jsx)("button",{onClick:function(e){return es(e)},disabled:C,children:(0,i.jsx)(y.Z,{className:"h-8 xl:h-10 text-gray-600 cursor-pointer hover:scale-125 transition-all duration-150 ease-out"})})})]})]})})})})},components_Search=function(e){var n=e.bookInput,t=e.handleBookInputChange,s=e.chapterInput,a=e.handleChapterInputChange,o=e.searchFunc;return(0,i.jsx)("div",{children:(0,i.jsxs)("form",{className:"w-full max-w-sm pt-2 pb-3",onSubmit:function(e){return o(e,n,s)},children:[(0,i.jsx)("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 px-1",children:"Jump to..."}),(0,i.jsxs)("div",{className:"flex items-center border-b py-2",children:[(0,i.jsx)("input",{type:"text",value:n,onChange:t,placeholder:"Genesis",className:"focus:ring-0 appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"}),(0,i.jsx)("input",{type:"text",value:s,onChange:a,placeholder:"1",className:"focus:ring-0 appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"}),(0,i.jsx)("button",{type:"submit",className:"flex-shrink-0 bg-gray-500 hover:bg-gray-400 border-none text-sm border-4 text-white py-1 px-2 rounded",children:"Search"})]})]})})},_=t(3407),components_BurgerMenu=function(e){var n=e.currentBook,t=(0,a._)((0,u.useState)(!1),2),s=t[0],o=t[1],r=(0,u.useRef)(null);function handleClickOutside(e){r.current&&!r.current.contains(e.target)&&o(!1)}return(0,u.useEffect)(function(){return window.addEventListener("click",handleClickOutside),function(){window.removeEventListener("click",handleClickOutside)}},[]),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"",ref:r,children:[(0,i.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-gray-900",onClick:function(){o(function(e){return!e})},children:(0,i.jsx)(_.Z,{className:"h-6 w-6"})}),s&&(0,i.jsx)("div",{className:"absolute h-[70vh] overflow-y-auto left-2 mt-2 w-full md:w-3/4 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("a",{className:"block text-center px-4 py-2 text-sm text-gray-700 bg-gray-50 cursor-pointer disabled",role:"menuitem",children:"Old Testament"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi"].map(function(e){return e.toLowerCase().replace(/\s/g,"")===n?(0,i.jsx)("a",{href:"/search/"+e.toLowerCase().replace(/\s/g,"")+"-1",className:"block font-bold px-4 py-2 text-sm text-gray-700 bg-blue-100 hover:text-gray-900 cursor-pointer",role:"menuitem",children:e}):(0,i.jsx)("a",{href:"/search/"+e.toLowerCase().replace(/\s/g,"")+"-1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:e})})}),(0,i.jsx)("a",{className:"block text-center px-4 py-2 text-sm text-gray-700 bg-gray-50 cursor-pointer disabled",role:"menuitem",children:"New Testament"}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:["Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"].map(function(e){return e.toLowerCase().replace(/\s/g,"")===n?(0,i.jsx)("a",{href:"/search/"+e.toLowerCase().replace(/\s/g,"")+"-1",className:"block font-bold px-4 py-2 text-sm text-gray-700 bg-blue-100 hover:text-gray-900 cursor-pointer",role:"menuitem",children:e}):(0,i.jsx)("a",{href:"/search/"+e.toLowerCase().replace(/\s/g,"")+"-1",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:e})})})]})})]})})};function SearchPage(){var e,n,t,r,h=(0,a._)((0,u.useState)(!1),2),d=h[0],m=h[1],p=(0,g.useSession)().data,f=(0,c.useRouter)(),x=f.query.query,b=(0,a._)((0,u.useState)(""),2),v=b[0],j=b[1],y=(0,a._)((0,u.useState)(""),2),w=y[0],S=y[1],C=(0,a._)((0,u.useState)(""),2),_=C[0],z=C[1],E=(0,a._)((0,u.useState)(""),2),L=E[0],M=E[1],R=(0,a._)((0,u.useState)(""),2),D=R[0],H=R[1],T=(0,a._)((0,u.useState)(!1),2),I=T[0],J=T[1],A=(0,u.useRef)(null);function handleClickOutsideSignOut(e){A.current&&!A.current.contains(e.target)&&J(!1)}(0,u.useEffect)(function(){var handleResize=function(){m(window.innerWidth<768)};return handleResize(),window.addEventListener("resize",handleResize),function(){return window.removeEventListener("resize",handleResize)}},[]),(0,u.useEffect)(function(){if(x){var e=x.trim().split("-");S(e.pop()),j(e.join(" "))}},[x]),(0,u.useEffect)(function(){v&&w&&B(null,v,w)},[v,w]),(0,u.useEffect)(function(){return window.addEventListener("click",handleClickOutsideSignOut),function(){window.removeEventListener("click",handleClickOutsideSignOut)}},[]);var B=(e=(0,s._)(function(e,n,t){var s,a,i,r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return e&&e.preventDefault(),t||(t=1),s=n.toLowerCase().replace(/\s/g,""),a=t.replace(/\s/g,""),[4,F(s,a)];case 1:if(H(i=o.sent()),j(n),S(t),r=null,!(null==p?void 0:p.user))return[3,3];return[4,O(s,a)];case 2:(r=o.sent())&&r!==i&&H(r),o.label=3;case 3:return f.push("/search/".concat(s,"-").concat(a)),[2]}})}),function(n,t,s){return e.apply(this,arguments)}),O=(n=(0,s._)(function(e,n){var t,s;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return t=(0,k.JU)(N,"Users",null==p?void 0:p.user.email,e,n),[4,(0,k.QT)(t)];case 1:if((s=a.sent()).exists())return[2,s.data().html];return[2,null]}})}),function(e,t){return n.apply(this,arguments)}),F=(t=(0,s._)(function(e,n){var t,s;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return t=(0,k.JU)(N,e,n),[4,(0,k.QT)(t)];case 1:if((s=a.sent()).exists())return[2,s.data().html];return[2,null]}})}),function(e,n){return t.apply(this,arguments)});return(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)(l(),{children:[(0,i.jsx)("title",{children:"Bible Assistant"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("div",{className:"sticky top-0 z-50 bg-white",children:p?(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsx)("div",{className:"pb-3 z-1",children:(0,i.jsx)(components_BurgerMenu,{currentBook:v})}),(0,i.jsxs)("div",{ref:A,children:[(0,i.jsx)("img",{onClick:function(){J(function(e){return!e})},src:null==p?void 0:null===(r=p.user)||void 0===r?void 0:r.image,alt:"profile picture",className:"h-10 w-10 rounded-full cursor-pointer hover:scale-125 transition-all duration-150 ease-out"}),I&&(0,i.jsx)("div",{className:"absolute right-0 top-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:(0,i.jsx)("button",{className:"block text-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer disabled",role:"menuitem",onClick:g.signOut,children:"Sign Out"})})]})]}):(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsx)("div",{className:"pb-3 z-1",children:(0,i.jsx)(components_BurgerMenu,{currentBook:v})}),(0,i.jsx)("button",{className:"py-2 px-4 bg-blue-300 hover:bg-blue-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:g.signIn,children:"Sign in"})]})}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)(components_Search,{bookInput:_,handleBookInputChange:function(e){z(e.target.value)},chapterInput:L,handleChapterInputChange:function(e){M(e.target.value)},searchFunc:B})}),(0,i.jsxs)("p",{className:"grid py-4 border-b-2 place-items-center text-3xl font-bold uppercase tracking-wide text-black",children:[function(e){if("songofsolomon"===e)return"Song of Solomon";var n=/(\d+)([a-zA-Z]+)/g.exec(e);if(!n)return e.toLowerCase().replace(/^\w/,function(e){return e.toUpperCase()});var t=n[1],s=n[2].toLowerCase().replace(/^\w/,function(e){return e.toUpperCase()});return"".concat(t," ").concat(s)}(v)," ",w]}),d?(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"mx-3 xl:mx-16",children:(0,i.jsx)(components_PassageMobile,{passageHTML:D,searchFunc:B,book:v,chapter:w})})}):(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"mx-3 xl:mx-16",children:(0,i.jsx)(components_PassageDesktop,{passageHTML:D,searchFunc:B,book:v,chapter:w})})}),(0,i.jsx)(components_ChatButton,{})]})}}},function(e){e.O(0,[16,90,774,888,179],function(){return e(e.s=7223)}),_N_E=e.O()}]);